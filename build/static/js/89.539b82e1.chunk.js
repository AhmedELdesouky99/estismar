(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[89],{2638:function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,f="~";function o(){}if(Object.create){o.prototype=Object.create(null);if(!(new o).__proto__)f=false}function a(e,t,n){this.fn=e;this.context=t;this.once=n||false}function r(e,t,n,o,i){if(typeof n!=="function"){throw new TypeError("The listener must be a function")}var r=new a(n,o||e,i),s=f?f+t:t;if(!e._events[s])e._events[s]=r,e._eventsCount++;else if(!e._events[s].fn)e._events[s].push(r);else e._events[s]=[e._events[s],r];return e}function u(e,t){if(--e._eventsCount===0)e._events=new o;else delete e._events[t]}function s(){this._events=new o;this._eventsCount=0}s.prototype.eventNames=function e(){var t=[],n,o;if(this._eventsCount===0)return t;for(o in n=this._events){if(i.call(n,o))t.push(f?o.slice(1):o)}if(Object.getOwnPropertySymbols){return t.concat(Object.getOwnPropertySymbols(n))}return t};s.prototype.listeners=function e(t){var n=f?f+t:t,o=this._events[n];if(!o)return[];if(o.fn)return[o.fn];for(var i=0,r=o.length,s=new Array(r);i<r;i++){s[i]=o[i].fn}return s};s.prototype.listenerCount=function e(t){var n=f?f+t:t,o=this._events[n];if(!o)return 0;if(o.fn)return 1;return o.length};s.prototype.emit=function e(t,n,o,i,r,s){var a=f?f+t:t;if(!this._events[a])return false;var l=this._events[a],h=arguments.length,u,p;if(l.fn){if(l.once)this.removeListener(t,l.fn,undefined,true);switch(h){case 1:return l.fn.call(l.context),true;case 2:return l.fn.call(l.context,n),true;case 3:return l.fn.call(l.context,n,o),true;case 4:return l.fn.call(l.context,n,o,i),true;case 5:return l.fn.call(l.context,n,o,i,r),true;case 6:return l.fn.call(l.context,n,o,i,r,s),true}for(p=1,u=new Array(h-1);p<h;p++){u[p-1]=arguments[p]}l.fn.apply(l.context,u)}else{var c=l.length,d;for(p=0;p<c;p++){if(l[p].once)this.removeListener(t,l[p].fn,undefined,true);switch(h){case 1:l[p].fn.call(l[p].context);break;case 2:l[p].fn.call(l[p].context,n);break;case 3:l[p].fn.call(l[p].context,n,o);break;case 4:l[p].fn.call(l[p].context,n,o,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++){u[d-1]=arguments[d]}l[p].fn.apply(l[p].context,u)}}}return true};s.prototype.on=function e(t,n,o){return r(this,t,n,o,false)};s.prototype.once=function e(t,n,o){return r(this,t,n,o,true)};s.prototype.removeListener=function e(t,n,o,i){var r=f?f+t:t;if(!this._events[r])return this;if(!n){u(this,r);return this}var s=this._events[r];if(s.fn){if(s.fn===n&&(!i||s.once)&&(!o||s.context===o)){u(this,r)}}else{for(var a=0,l=[],h=s.length;a<h;a++){if(s[a].fn!==n||i&&!s[a].once||o&&s[a].context!==o){l.push(s[a])}}if(l.length)this._events[r]=l.length===1?l[0]:l;else u(this,r)}return this};s.prototype.removeAllListeners=function e(t){var n;if(t){n=f?f+t:t;if(this._events[n])u(this,n)}else{this._events=new o;this._eventsCount=0}return this};s.prototype.off=s.prototype.removeListener;s.prototype.addListener=s.prototype.on;s.prefixed=f;s.EventEmitter=s;if(true){e.exports=s}},2639:function(e,t,n){"use strict";e.exports=o;function o(e,t){this.x=e;this.y=t}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;this.x=t;this.y=n;return this},_add:function(e){this.x+=e.x;this.y+=e.y;return this},_sub:function(e){this.x-=e.x;this.y-=e.y;return this},_mult:function(e){this.x*=e;this.y*=e;return this},_div:function(e){this.x/=e;this.y/=e;return this},_multByPoint:function(e){this.x*=e.x;this.y*=e.y;return this},_divByPoint:function(e){this.x/=e.x;this.y/=e.y;return this},_unit:function(){this._div(this.mag());return this},_perp:function(){var e=this.y;this.y=this.x;this.x=-e;return this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),o=t*this.x-n*this.y,i=n*this.x+t*this.y;this.x=o;this.y=i;return this},_rotateAround:function(e,t){var n=Math.cos(e),o=Math.sin(e),i=t.x+n*(this.x-t.x)-o*(this.y-t.y),r=t.y+o*(this.x-t.x)+n*(this.y-t.y);this.x=i;this.y=r;return this},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};o.convert=function(e){if(e instanceof o){return e}if(Array.isArray(e)){return new o(e[0],e[1])}return e}},3460:function(N,j,e){"use strict";var t=e(0);var u=e.n(t);var Z=e(1);var n=e.n(Z);var U=e(34);var _=e.n(U);var H=e(2638);var R=e.n(H);var K=function e(t,n){if(t===n)return true;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return false;var o,i,r;if(Array.isArray(t)){o=t.length;if(o!=n.length)return false;for(i=o;i--!==0;)if(!e(t[i],n[i]))return false;return true}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();r=Object.keys(t);o=r.length;if(o!==Object.keys(n).length)return false;for(i=o;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return false;for(i=o;i--!==0;){var s=r[i];if(!e(t[s],n[s]))return false}return true}return t!==t&&n!==n};const B="__googleMapsScriptId";var o;(function(e){e[e["INITIALIZED"]=0]="INITIALIZED";e[e["LOADING"]=1]="LOADING";e[e["SUCCESS"]=2]="SUCCESS";e[e["FAILURE"]=3]="FAILURE"})(o||(o={}));class d{constructor({apiKey:e,authReferrerPolicy:t,channel:n,client:o,id:i=B,language:r,libraries:s=[],mapIds:a,nonce:l,region:h,retries:u=3,url:p="https://maps.googleapis.com/maps/api/js",version:c}){this.CALLBACK="__googleMapsCallback";this.callbacks=[];this.done=false;this.loading=false;this.errors=[];this.apiKey=e;this.authReferrerPolicy=t;this.channel=n;this.client=o;this.id=i||B;this.language=r;this.libraries=s;this.mapIds=a;this.nonce=l;this.region=h;this.retries=u;this.url=p;this.version=c;if(d.instance){if(!K(this.options,d.instance.options)){throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(d.instance.options)}`)}return d.instance}d.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){if(this.errors.length){return o.FAILURE}if(this.done){return o.SUCCESS}if(this.loading){return o.LOADING}return o.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;e+=`?callback=${this.CALLBACK}`;if(this.apiKey){e+=`&key=${this.apiKey}`}if(this.channel){e+=`&channel=${this.channel}`}if(this.client){e+=`&client=${this.client}`}if(this.libraries.length>0){e+=`&libraries=${this.libraries.join(",")}`}if(this.language){e+=`&language=${this.language}`}if(this.region){e+=`&region=${this.region}`}if(this.version){e+=`&v=${this.version}`}if(this.mapIds){e+=`&map_ids=${this.mapIds.join(",")}`}if(this.authReferrerPolicy){e+=`&auth_referrer_policy=${this.authReferrerPolicy}`}return e}deleteScript(){const e=document.getElementById(this.id);if(e){e.remove()}}load(){return this.loadPromise()}loadPromise(){return new Promise((t,n)=>{this.loadCallback(e=>{if(!e){t(window.google)}else{n(e.error)}})})}loadCallback(e){this.callbacks.push(e);this.execute()}setScript(){if(document.getElementById(this.id)){this.callback();return}const e=this.createUrl();const t=document.createElement("script");t.id=this.id;t.type="text/javascript";t.src=e;t.onerror=this.loadErrorCallback.bind(this);t.defer=true;t.async=true;if(this.nonce){t.nonce=this.nonce}document.head.appendChild(t)}reset(){this.deleteScript();this.done=false;this.loading=false;this.errors=[];this.onerrorEvent=null}resetIfRetryingFailed(){if(this.failed){this.reset()}}loadErrorCallback(e){this.errors.push(e);if(this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${t} ms.`);setTimeout(()=>{this.deleteScript();this.setScript()},t)}else{this.onerrorEvent=e;this.callback()}}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=true;this.loading=false;this.callbacks.forEach(e=>{e(this.onerrorEvent)});this.callbacks=[]}execute(){this.resetIfRetryingFailed();if(this.done){this.callback()}else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader."+"This may result in undesirable behavior as options and script parameters may not match.");this.callback();return}if(this.loading);else{this.loading=true;this.setCallback();this.setScript()}}}}var W=e(2639);var h=e.n(W);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var F={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},G=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(){return!1},n.render=function(){return u.a.createElement("div",{ref:this.props.registerChild,style:F})},t}(t["Component"]),$=function(n){function e(e){var t;return(t=n.call(this)||this).gmapInstance=e,t}i(e,n);var t=e.prototype;return t.getChildren=function(){return this.gmapInstance.props.children},t.getMousePosition=function(){return this.gmapInstance.mouse_},t.getUpdateCounter=function(){return this.gmapInstance.updateCounter_},t.dispose=function(){this.gmapInstance=null,this.removeAllListeners()},e}(R.a),l=function(e,t){for(var n=v({},e),o=0;o<t.length;o++){var i=t[o];i in n&&delete n[i]}return n},V=Object.prototype.hasOwnProperty;function q(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function p(e,t){if(q(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++)if(!V.call(t,n[i])||!q(e[n[i]],t[n[i]]))return!1;return!0}var J={width:"100%",height:"100%",left:0,top:0,margin:0,padding:0,position:"absolute"},X={width:0,height:0,left:0,top:0,backgroundColor:"transparent",position:"absolute"},r=function(t){function e(e){var a;return(a=t.call(this,e)||this)._getState=function(){return{children:a.props.dispatcher.getChildren(),updateCounter:a.props.dispatcher.getUpdateCounter()}},a._onChangeHandler=function(){if(a.dimensionsCache_){var e=(a.state.children||[]).length,t=a._getState();a.setState(t,function(){return(t.children||[]).length!==e&&a._onMouseChangeHandler()})}},a._onChildClick=function(){a.props.onChildClick&&a.hoverChildProps_&&a.props.onChildClick(a.hoverKey_,a.hoverChildProps_)},a._onChildMouseDown=function(){a.props.onChildMouseDown&&a.hoverChildProps_&&a.props.onChildMouseDown(a.hoverKey_,a.hoverChildProps_)},a._onChildMouseEnter=function(e,t){a.dimensionsCache_&&(a.props.onChildMouseEnter&&a.props.onChildMouseEnter(e,t),a.hoverChildProps_=t,a.hoverKey_=e,a.setState({hoverKey:e}))},a._onChildMouseLeave=function(){if(a.dimensionsCache_){var e=a.hoverKey_;null!=e&&(a.props.onChildMouseLeave&&a.props.onChildMouseLeave(e,a.hoverChildProps_),a.hoverKey_=null,a.hoverChildProps_=null,a.setState({hoverKey:null}))}},a._onMouseAllow=function(e){e||a._onChildMouseLeave(),a.allowMouse_=e},a._onMouseChangeHandler=function(){a.allowMouse_&&a._onMouseChangeHandlerRaf()},a._onMouseChangeHandlerRaf=function(){if(a.dimensionsCache_){var i=a.props.dispatcher.getMousePosition();if(i){var r=[],s=a.props.getHoverDistance();if(u.a.Children.forEach(a.state.children,function(e,t){if(e&&(void 0!==e.props.latLng||void 0!==e.props.lat||void 0!==e.props.lng)){var n=null!=e.key?e.key:t,o=a.props.distanceToMouse(a.dimensionsCache_[n],i,e.props);o<s&&r.push({key:n,dist:o,props:e.props})}}),r.length){r.sort(function(e,t){return e.dist-t.dist});var e=r[0].key,t=r[0].props;a.hoverKey_!==e&&(a._onChildMouseLeave(),a._onChildMouseEnter(e,t))}else a._onChildMouseLeave()}else a._onChildMouseLeave()}},a._getDimensions=function(e){return a.dimensionsCache_[e]},a.dimensionsCache_={},a.hoverKey_=null,a.hoverChildProps_=null,a.allowMouse_=!0,a.state=v({},a._getState(),{hoverKey:null}),a}i(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.dispatcher.on("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.on("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.on("kON_CLICK",this._onChildClick),this.props.dispatcher.on("kON_MDOWN",this._onChildMouseDown)},n.shouldComponentUpdate=function(e,t){return!0===this.props.experimental?!p(this.props,e)||!p(l(this.state,["hoverKey"]),l(t,["hoverKey"])):!p(this.props,e)||!p(this.state,t)},n.componentWillUnmount=function(){this.props.dispatcher.removeListener("kON_CHANGE",this._onChangeHandler),this.props.dispatcher.removeListener("kON_MOUSE_POSITION_CHANGE",this._onMouseChangeHandler),this.props.dispatcher.removeListener("kON_CLICK",this._onChildClick),this.props.dispatcher.removeListener("kON_MDOWN",this._onChildMouseDown),this.dimensionsCache_=null},n.render=function(){var h=this,e=this.props.style||J;this.dimensionsCache_={};var t=u.a.Children.map(this.state.children,function(e,t){if(e){if(void 0===e.props.latLng&&void 0===e.props.lat&&void 0===e.props.lng)return u.a.cloneElement(e,{$geoService:h.props.geoService,$onMouseAllow:h._onMouseAllow,$prerender:h.props.prerender});var n=void 0!==e.props.latLng?e.props.latLng:{lat:e.props.lat,lng:e.props.lng},o=h.props.insideMapPanes?h.props.geoService.fromLatLngToDivPixel(n):h.props.geoService.fromLatLngToCenterPixel(n),i={left:o.x,top:o.y};if(void 0!==e.props.seLatLng||void 0!==e.props.seLat&&void 0!==e.props.seLng){var r=void 0!==e.props.seLatLng?e.props.seLatLng:{lat:e.props.seLat,lng:e.props.seLng},s=h.props.insideMapPanes?h.props.geoService.fromLatLngToDivPixel(r):h.props.geoService.fromLatLngToCenterPixel(r);i.width=s.x-o.x,i.height=s.y-o.y}var a=h.props.geoService.fromLatLngToContainerPixel(n),l=null!=e.key?e.key:t;return h.dimensionsCache_[l]=v({x:a.x,y:a.y},n),u.a.createElement("div",{key:l,style:v({},X,i),className:e.props.$markerHolderClassName},u.a.cloneElement(e,{$hover:l===h.state.hoverKey,$getDimensions:h._getDimensions,$dimensionKey:l,$geoService:h.props.geoService,$onMouseAllow:h._onMouseAllow,$prerender:h.props.prerender}))}});return u.a.createElement("div",{style:e},t)},e}(t["Component"]);r.propTypes={geoService:n.a.any,style:n.a.any,distanceToMouse:n.a.func,dispatcher:n.a.any,onChildClick:n.a.func,onChildMouseDown:n.a.func,onChildMouseLeave:n.a.func,onChildMouseEnter:n.a.func,getHoverDistance:n.a.func,insideMapPanes:n.a.bool,prerender:n.a.bool},r.defaultProps={insideMapPanes:!1,prerender:!1};var Y={width:"50%",height:"50%",left:"50%",top:"50%",margin:0,padding:0,position:"absolute"};function Q(e){return u.a.createElement("div",{style:Y},u.a.createElement(r,v({},e,{prerender:!0})))}var s,a,c,ee=new Promise(function(e){c=e}),te=function(e,t){if(!e)return ee;if(a)return a;e.libraries||(e.libraries=[]);var n=[].concat(e.libraries);if(t&&(0!==n.length&&n.includes("visualization")||n.push("visualization"),console.warn("heatmapLibrary will be deprecated in the future. Please use { libraries: ['visualization'] } in bootstrapURLKeys property instead")),false&&false){var o='"callback" key in bootstrapURLKeys is not allowed,\n                      use onGoogleApiLoaded property instead';throw console.error(o),new Error(o)}if("undefined"==typeof window)throw new Error("google map cannot be loaded outside browser env");var i=e.key,r=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)t.indexOf(n=r[o])>=0||(i[n]=e[n]);return i}(e,["key"]);return s||(s=new d(v({apiKey:i||""},r,{libraries:n}))),a=s.load().then(function(){return c(window.google.maps),window.google.maps}),c(a),a};function ne(e,t,n){var o=n-t;return e===n?e:((e-t)%o+o)%o+t}var f=function(){function e(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t}return e.prototype.wrap=function(){return new e(this.lat,ne(this.lng,-180,180))},e}();f.convert=function(e){return e instanceof f?e:Array.isArray(e)?new f(e[0],e[1]):"lng"in e&&"lat"in e?new f(e.lat,e.lng):e};var oe=function(){function e(e,t,n){this.tileSize=e||512,this._minZoom=t||0,this._maxZoom=n||52,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this.zoom=0,this.center=new f(0,0),this.angle=0}var t,n=e.prototype;return n.zoomScale=function(e){return Math.pow(2,e)},n.scaleZoom=function(e){return Math.log(e)/Math.LN2},n.project=function(e,t){return new h.a(this.lngX(e.lng,t),this.latY(e.lat,t))},n.unproject=function(e,t){return new f(this.yLat(e.y,t),this.xLng(e.x,t))},n.lngX=function(e,t){return(180+e)*(t||this.worldSize)/360},n.latY=function(e,t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*(t||this.worldSize)/360},n.xLng=function(e,t){return 360*e/(t||this.worldSize)-180},n.yLat=function(e,t){return 360/Math.PI*Math.atan(Math.exp((180-360*e/(t||this.worldSize))*Math.PI/180))-90},n.locationPoint=function(e){var t=this.project(e);return this.centerPoint._sub(this.point._sub(t)._rotate(this.angle))},n.pointLocation=function(e){var t=this.centerPoint._sub(e)._rotate(-this.angle);return this.unproject(this.point.sub(t))},(t=[{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom=e,this.zoom=Math.max(this.zoom,e)}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom=e,this.zoom=Math.min(this.zoom,e)}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerPoint",get:function(){return new h.a(0,0)}},{key:"size",get:function(){return new h.a(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){this.angle=-ne(e,-180,180)*Math.PI/180}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}},{key:"x",get:function(){return this.lngX(this.center.lng)}},{key:"y",get:function(){return this.latY(this.center.lat)}},{key:"point",get:function(){return new h.a(this.x,this.y)}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t),e}(),ie=function(){function e(e){this.hasSize_=!1,this.hasView_=!1,this.transform_=new oe(e||512)}var t=e.prototype;return t.setView=function(e,t,n){this.transform_.center=f.convert(e),this.transform_.zoom=+t,this.transform_.bearing=+n,this.hasView_=!0},t.setViewSize=function(e,t){this.transform_.width=e,this.transform_.height=t,this.hasSize_=!0},t.setMapCanvasProjection=function(e,t){this.maps_=e,this.mapCanvasProjection_=t},t.canProject=function(){return this.hasSize_&&this.hasView_},t.hasSize=function(){return this.hasSize_},t.fromLatLngToCenterPixel=function(e){return this.transform_.locationPoint(f.convert(e))},t.fromLatLngToDivPixel=function(e){if(this.mapCanvasProjection_){var t=new this.maps_.LatLng(e.lat,e.lng);return this.mapCanvasProjection_.fromLatLngToDivPixel(t)}return this.fromLatLngToCenterPixel(e)},t.fromLatLngToContainerPixel=function(e){if(this.mapCanvasProjection_){var t=new this.maps_.LatLng(e.lat,e.lng);return this.mapCanvasProjection_.fromLatLngToContainerPixel(t)}var n=this.fromLatLngToCenterPixel(e);return n.x-=this.transform_.worldSize*Math.round(n.x/this.transform_.worldSize),n.x+=this.transform_.width/2,n.y+=this.transform_.height/2,n},t.fromContainerPixelToLatLng=function(e){if(this.mapCanvasProjection_){var t=this.mapCanvasProjection_.fromContainerPixelToLatLng(e);return{lat:t.lat(),lng:t.lng()}}var n=v({},e);n.x-=this.transform_.width/2,n.y-=this.transform_.height/2;var o=this.transform_.pointLocation(h.a.convert(n));return o.lng-=360*Math.round(o.lng/360),o},t.getWidth=function(){return this.transform_.width},t.getHeight=function(){return this.transform_.height},t.getZoom=function(){return this.transform_.zoom},t.getCenter=function(){return this.transform_.pointLocation({x:0,y:0})},t.getBounds=function(e,t){var n=e&&e[0]||0,o=e&&e[1]||0,i=e&&e[2]||0,r=e&&e[3]||0;if(this.getWidth()-o-r>0&&this.getHeight()-n-i>0){var s=this.transform_.pointLocation(h.a.convert({x:r-this.getWidth()/2,y:n-this.getHeight()/2})),a=this.transform_.pointLocation(h.a.convert({x:this.getWidth()/2-o,y:this.getHeight()/2-i})),l=[s.lat,s.lng,a.lat,a.lng,a.lat,s.lng,s.lat,a.lng];return t&&(l=l.map(function(e){return Math.round(e*t)/t})),l}return[0,0,0,0]},e}();function re(e){if(window.requestAnimationFrame)return window.requestAnimationFrame(e);var t=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return t?t(e):window.setTimeout(e,1e3/60)}var M=Math.log2?Math.log2:function(e){return Math.log(e)/Math.LN2};function se(n,o){return Object.keys(n).reduce(function(e,t){return o(n[t])&&(e[t]=n[t]),e},{})}var C=function(e){if(null!==e&&"object"==typeof e){if(0===Object.keys(e).length)return!0}else if(null==e||""===e)return!0;return!1},ae=Object.prototype.toString;function g(e){return"number"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Number]"===ae.call(e)}var m=null;function le(){if(m)return m;if("undefined"!=typeof navigator){var e=navigator.userAgent.indexOf("MSIE")>-1,t=navigator.userAgent.indexOf("Firefox")>-1,n=navigator.userAgent.toLowerCase().indexOf("op")>-1,o=navigator.userAgent.indexOf("Chrome")>-1,i=navigator.userAgent.indexOf("Safari")>-1;return o&&i&&(i=!1),o&&n&&(o=!1),m={isExplorer:e,isFirefox:t,isOpera:n,isChrome:o,isSafari:i}}return m={isChrome:!0,isExplorer:!1,isFirefox:!1,isOpera:!1,isSafari:!1}}var he=function(e){return Function.prototype.toString.call(e)};function w(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&he(n)===he(Object)}function b(e,t,n,o){e.addEventListener(t,n,function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()?{capture:o,passive:!0}:o)}var L,x=!("undefined"==typeof window||!window.document||!window.document.createElement);L=x?window:"undefined"!=typeof self?self:void 0;var ue,k="undefined"!=typeof document&&document.attachEvent,pe=!1;if(x&&!k){var ce=function(){var t=L.requestAnimationFrame||L.mozRequestAnimationFrame||L.webkitRequestAnimationFrame||function(e){return L.setTimeout(e,20)};return function(e){return t(e)}}(),de=(ue=L.cancelAnimationFrame||L.mozCancelAnimationFrame||L.webkitCancelAnimationFrame||L.clearTimeout,function(e){return ue(e)}),S=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,o=t.lastElementChild,i=n.firstElementChild;o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},fe=function(t){var n=this;S(this),this.__resizeRAF__&&de(this.__resizeRAF__),this.__resizeRAF__=ce(function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(n)&&(n.__resizeLast__.width=n.offsetWidth,n.__resizeLast__.height=n.offsetHeight,n.__resizeListeners__.forEach(function(e){e.call(n,t)}))})},D=!1,O="",z="animationstart",ge="Webkit Moz O ms".split(" "),me="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" ");if(x){var _e=document.createElement("fakeelement");if(void 0!==_e.style.animationName&&(D=!0),!1===D)for(var T=0;T<ge.length;T++)if(void 0!==_e.style[ge[T]+"AnimationName"]){O="-"+ge[T].toLowerCase()+"-",z=me[T],D=!0;break}}var ve="resizeanim",ye="@"+O+"keyframes "+ve+" { from { opacity: 0; } to { opacity: 0; } } ",Me=O+"animation: 1ms "+ve+"; "}var E=void 0!==_.a.createPortal,Ce=E?_.a.createPortal:_.a.unstable_renderSubtreeIntoContainer,P=function(e){return w(e)?e:{lat:e[0],lng:e[1]}},we=function(e,t){return false&&false,t<e?e:t},A=function(n){function e(e){var m;if((m=n.call(this,e)||this)._getMinZoom=function(){if(m.geoService_.getWidth()>0||m.geoService_.getHeight()>0){var e=Math.ceil(m.geoService_.getWidth()/256)+2,t=Math.ceil(m.geoService_.getHeight()/256)+2,n=Math.max(e,t);return Math.ceil(M(n))}return 3},m._computeMinZoom=function(e){return C(e)?m._getMinZoom():e},m._mapDomResizeCallback=function(){if(m.resetSizeOnIdle_=!0,m.maps_){var e=m.props.center||m.props.defaultCenter,t=m.map_.getCenter();m.maps_.event.trigger(m.map_,"resize"),m.map_.setCenter(m.props.resetBoundsOnResize?e:t)}},m._setLayers=function(e){e.forEach(function(e){m.layers_[e]=new m.maps_[e],m.layers_[e].setMap(m.map_)})},m._renderPortal=function(){return u.a.createElement(r,{experimental:m.props.experimental,onChildClick:m._onChildClick,onChildMouseDown:m._onChildMouseDown,onChildMouseEnter:m._onChildMouseEnter,onChildMouseLeave:m._onChildMouseLeave,geoService:m.geoService_,insideMapPanes:!0,distanceToMouse:m.props.distanceToMouse,getHoverDistance:m._getHoverDistance,dispatcher:m.markersDispatcher_})},m._initMap=function(){if(!m.initialized_){m.initialized_=!0;var e=P(m.props.center||m.props.defaultCenter);m.geoService_.setView(e,m.props.zoom||m.props.defaultZoom,0),m._onBoundsChanged();var t=v({},m.props.apiKey&&{key:m.props.apiKey},m.props.bootstrapURLKeys);m.props.googleMapLoader(t,m.props.heatmapLibrary).then(function(i){if(m.mounted_){var r,e,t=m.geoService_.getCenter(),n={zoom:m.props.zoom||m.props.defaultZoom,center:new i.LatLng(t.lat,t.lng)};m.props.heatmap.positions&&(Object.assign(y(m),{heatmap:(r=i,e=m.props.heatmap,new r.visualization.HeatmapLayer({data:e.positions.reduce(function(e,t){var n=t.weight,o=void 0===n?1:n;return e.push({location:new r.LatLng(t.lat,t.lng),weight:o}),e},[])}))}),function(t,e){var n=e.options,o=void 0===n?{}:n;Object.keys(o).map(function(e){return t.set(e,o[e])})}(m.heatmap,m.props.heatmap));var o=se(i,w),s="function"==typeof m.props.options?m.props.options(o):m.props.options,a=!C(m.props.draggable)&&{draggable:m.props.draggable},l=m._computeMinZoom(s.minZoom);m.minZoom_=l;var h=v({},{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3},{minZoom:l},s,n);m.defaultDraggableOption_=C(h.draggable)?m.defaultDraggableOption_:h.draggable;var u=v({},h,a);u.minZoom=we(u.minZoom,l);var p=new i.Map(_.a.findDOMNode(m.googleMapDom_),u);m.map_=p,m.maps_=i,m._setLayers(m.props.layerTypes);var c=i.version.match(/^3\.(\d+)\./),d=c&&Number(c[1]),f=y(m),g=Object.assign(new i.OverlayView,{onAdd:function(){var e="undefined"!=typeof screen?screen.width+"px":"2000px",t="undefined"!=typeof screen?screen.height+"px":"2000px",n=document.createElement("div");if(n.style.backgroundColor="transparent",n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=e,n.style.height=t,f.props.overlayViewDivStyle){var o=f.props.overlayViewDivStyle;"object"==typeof o&&Object.keys(o).forEach(function(e){n.style[e]=o[e]})}this.getPanes().overlayMouseTarget.appendChild(n),f.geoService_.setMapCanvasProjection(i,g.getProjection()),E?f.setState({overlay:n}):Ce(f,f._renderPortal(),n,function(){return f.setState({overlay:n})})},onRemove:function(){var e=f.state.overlay;e&&!E&&_.a.unmountComponentAtNode(e),f.setState({overlay:null})},draw:function(){if(f.updateCounter_++,f._onBoundsChanged(p,i,!f.props.debounced),f.googleApiLoadedCalled_||(f._onGoogleApiLoaded({map:p,maps:i,ref:f.googleMapDom_}),f.googleApiLoadedCalled_=!0),f.mouse_){var e=f.geoService_.fromContainerPixelToLatLng(f.mouse_);f.mouse_.lat=e.lat,f.mouse_.lng=e.lng}f._onChildMouseMove(),f.markersDispatcher_&&(f.markersDispatcher_.emit("kON_CHANGE"),f.fireMouseEventOnIdle_&&f.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"))}});m.overlay_=g,g.setMap(p),m.props.heatmap.positions&&m.heatmap.setMap(p),m.props.onTilesLoaded&&i.event.addListener(p,"tilesloaded",function(){f._onTilesLoaded()}),i.event.addListener(p,"zoom_changed",function(){f.geoService_.getZoom()!==p.getZoom()&&(f.zoomAnimationInProgress_||(f.zoomAnimationInProgress_=!0,f._onZoomAnimationStart(p.zoom)),d<32)&&((new Date).getTime()-m.zoomControlClickTime_<300?re(function(){return re(function(){f.updateCounter_++,f._onBoundsChanged(p,i)})}):(f.updateCounter_++,f._onBoundsChanged(p,i)))}),i.event.addListener(p,"idle",function(){if(m.resetSizeOnIdle_){m._setViewSize();var e=m._computeMinZoom(s.minZoom);e!==m.minZoom_&&(m.minZoom_=e,p.setOptions({minZoom:e})),m.resetSizeOnIdle_=!1}f.zoomAnimationInProgress_&&(f.zoomAnimationInProgress_=!1,f._onZoomAnimationEnd(p.zoom)),f.updateCounter_++,f._onBoundsChanged(p,i),f.dragTime_=0,f.markersDispatcher_&&f.markersDispatcher_.emit("kON_CHANGE")}),i.event.addListener(p,"mouseover",function(){f.mouseInMap_=!0}),i.event.addListener(p,"click",function(){f.mouseInMap_=!0}),i.event.addListener(p,"mouseout",function(){f.mouseInMap_=!1,f.mouse_=null,f.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")}),i.event.addListener(p,"drag",function(){f.dragTime_=(new Date).getTime(),f._onDrag(p)}),i.event.addListener(p,"dragend",function(){var e=i.event.addListener(p,"idle",function(){i.event.removeListener(e),f._onDragEnd(p)})}),i.event.addListener(p,"maptypeid_changed",function(){f._onMapTypeIdChange(p.getMapTypeId())})}}).catch(function(e){throw m._onGoogleApiLoaded({map:null,maps:null,ref:m.googleMapDom_}),console.error(e),e})}},m._onGoogleApiLoaded=function(){var e;m.props.onGoogleApiLoaded&&(false&&false,(e=m.props).onGoogleApiLoaded.apply(e,arguments))},m._getHoverDistance=function(){return m.props.hoverDistance},m._onDrag=function(){var e;return m.props.onDrag&&(e=m.props).onDrag.apply(e,arguments)},m._onDragEnd=function(){var e;return m.props.onDragEnd&&(e=m.props).onDragEnd.apply(e,arguments)},m._onMapTypeIdChange=function(){var e;return m.props.onMapTypeIdChange&&(e=m.props).onMapTypeIdChange.apply(e,arguments)},m._onZoomAnimationStart=function(){var e;return m.props.onZoomAnimationStart&&(e=m.props).onZoomAnimationStart.apply(e,arguments)},m._onZoomAnimationEnd=function(){var e;return m.props.onZoomAnimationEnd&&(e=m.props).onZoomAnimationEnd.apply(e,arguments)},m._onTilesLoaded=function(){return m.props.onTilesLoaded&&m.props.onTilesLoaded()},m._onChildClick=function(){var e;if(m.props.onChildClick)return(e=m.props).onChildClick.apply(e,arguments)},m._onChildMouseDown=function(e,t){m.childMouseDownArgs_=[e,t],m.props.onChildMouseDown&&m.props.onChildMouseDown(e,t,v({},m.mouse_))},m._onChildMouseUp=function(){var e;m.childMouseDownArgs_&&(m.props.onChildMouseUp&&(e=m.props).onChildMouseUp.apply(e,m.childMouseDownArgs_.concat([v({},m.mouse_)])),m.childMouseDownArgs_=null,m.childMouseUpTime_=(new Date).getTime())},m._onChildMouseMove=function(){var e;m.childMouseDownArgs_&&m.props.onChildMouseMove&&(e=m.props).onChildMouseMove.apply(e,m.childMouseDownArgs_.concat([v({},m.mouse_)]))},m._onChildMouseEnter=function(){var e;if(m.props.onChildMouseEnter)return(e=m.props).onChildMouseEnter.apply(e,arguments)},m._onChildMouseLeave=function(){var e;if(m.props.onChildMouseLeave)return(e=m.props).onChildMouseLeave.apply(e,arguments)},m._setViewSize=function(){if(m.mounted_){if(document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)m.geoService_.setViewSize(window.innerWidth,window.innerHeight);else{var e=_.a.findDOMNode(m.googleMapDom_);m.geoService_.setViewSize(e.clientWidth,e.clientHeight)}m._onBoundsChanged()}},m._onWindowResize=function(){m.resetSizeOnIdle_=!0},m._onMapMouseMove=function(e){if(m.mouseInMap_){var t=(new Date).getTime();t-m.mouseMoveTime_>50&&(m.boundingRect_=e.currentTarget.getBoundingClientRect()),m.mouseMoveTime_=t;var n=e.clientX-m.boundingRect_.left,o=e.clientY-m.boundingRect_.top;m.mouse_||(m.mouse_={x:0,y:0,lat:0,lng:0}),m.mouse_.x=n,m.mouse_.y=o;var i=m.geoService_.fromContainerPixelToLatLng(m.mouse_);m.mouse_.lat=i.lat,m.mouse_.lng=i.lng,m._onChildMouseMove(),t-m.dragTime_<100?m.fireMouseEventOnIdle_=!0:(m.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE"),m.fireMouseEventOnIdle_=!1)}},m._onClick=function(){var e;return m.props.onClick&&!m.childMouseDownArgs_&&(new Date).getTime()-m.childMouseUpTime_>300&&0===m.dragTime_&&(e=m.props).onClick.apply(e,arguments)},m._onMapClick=function(e){m.markersDispatcher_&&(m._onMapMouseMove(e),(new Date).getTime()-m.dragTime_>100&&(m.mouse_&&m._onClick(v({},m.mouse_,{event:e})),m.markersDispatcher_.emit("kON_CLICK",e)))},m._onMapMouseDownNative=function(e){m.mouseInMap_&&m._onMapMouseDown(e)},m._onMapMouseDown=function(e){m.markersDispatcher_&&(new Date).getTime()-m.dragTime_>100&&(m._onMapMouseMove(e),m.markersDispatcher_.emit("kON_MDOWN",e))},m._onMapMouseDownCapture=function(){le().isChrome&&(m.zoomControlClickTime_=(new Date).getTime())},m._onKeyDownCapture=function(){le().isChrome&&(m.zoomControlClickTime_=(new Date).getTime())},m._isCenterDefined=function(e){return e&&(w(e)&&g(e.lat)&&g(e.lng)||2===e.length&&g(e[0])&&g(e[1]))},m._onBoundsChanged=function(e,t,n){if(e){var o=e.getCenter();m.geoService_.setView([o.lat(),o.lng()],e.getZoom(),0)}if((m.props.onChange||m.props.onBoundsChange)&&m.geoService_.canProject()){var i=m.geoService_.getZoom(),r=m.geoService_.getBounds(),s=m.geoService_.getCenter();if(!function(e,t,n){if(e&&t){for(var o=0;o!==e.length;++o)if(Math.abs(e[o]-t[o])>1e-5)return!1;return!0}return!1}(r,m.prevBounds_)&&!1!==n){var a=m.geoService_.getBounds(m.props.margin);m.props.onBoundsChange&&m.props.onBoundsChange(m.centerIsObject_?v({},s):[s.lat,s.lng],i,r,a),m.props.onChange&&m.props.onChange({center:v({},s),zoom:i,bounds:{nw:{lat:r[0],lng:r[1]},se:{lat:r[2],lng:r[3]},sw:{lat:r[4],lng:r[5]},ne:{lat:r[6],lng:r[7]}},marginBounds:{nw:{lat:a[0],lng:a[1]},se:{lat:a[2],lng:a[3]},sw:{lat:a[4],lng:a[5]},ne:{lat:a[6],lng:a[7]}},size:m.geoService_.hasSize()?{width:m.geoService_.getWidth(),height:m.geoService_.getHeight()}:{width:0,height:0}}),m.prevBounds_=r}}},m._registerChild=function(e){m.googleMapDom_=e},m.mounted_=!1,m.initialized_=!1,m.googleApiLoadedCalled_=!1,m.map_=null,m.maps_=null,m.prevBounds_=null,m.heatmap=null,m.layers_={},m.mouse_=null,m.mouseMoveTime_=0,m.boundingRect_=null,m.mouseInMap_=!0,m.dragTime_=0,m.fireMouseEventOnIdle_=!1,m.updateCounter_=0,m.markersDispatcher_=new $(y(m)),m.geoService_=new ie(256),m.centerIsObject_=w(m.props.center),m.minZoom_=3,m.defaultDraggableOption_=!0,m.zoomControlClickTime_=0,m.childMouseDownArgs_=null,m.childMouseUpTime_=0,m.googleMapDom_=null,false&&false,m._isCenterDefined(m.props.center||m.props.defaultCenter)){var t=P(m.props.center||m.props.defaultCenter);m.geoService_.setView(t,m.props.zoom||m.props.defaultZoom,0)}return m.zoomAnimationInProgress_=!1,m.state={overlay:null},m}i(e,n);var t=e.prototype;return t.componentDidMount=function(){var e=this;this.mounted_=!0,b(window,"resize",this._onWindowResize,!1),b(window,"keydown",this._onKeyDownCapture,!0);var t=_.a.findDOMNode(this.googleMapDom_);t&&b(t,"mousedown",this._onMapMouseDownNative,!0),b(window,"mouseup",this._onChildMouseUp,!1);var n=v({},this.props.apiKey&&{key:this.props.apiKey},this.props.bootstrapURLKeys);this.props.googleMapLoader(n,this.props.heatmapLibrary),setTimeout(function(){e._setViewSize(),e._isCenterDefined(e.props.center||e.props.defaultCenter)&&e._initMap()},0,this),this.props.resetBoundsOnResize&&function(t,e){if(void 0===t.parentNode){var n=document.createElement("div");t.parentNode=n}t=t.parentNode,k?t.attachEvent("onresize",e):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),function(){if(!pe){var e=(ye||"")+".resize-triggers { "+(Me||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),pe=!0}}(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),S(t),b(t,"scroll",fe,!0),z&&t.__resizeTriggers__.addEventListener(z,function(e){e.animationName==ve&&S(t)})),t.__resizeListeners__.push(e))}(t,this._mapDomResizeCallback)},t.shouldComponentUpdate=function(e,t){return!p(l(this.props,["draggable"]),l(e,["draggable"]))||!p(this.state,t)},t.componentDidUpdate=function(e){var t=this;if(false&&false,!this._isCenterDefined(e.center)&&this._isCenterDefined(this.props.center)&&setTimeout(function(){return t._initMap()},0),this.map_){var n=this.geoService_.getCenter();if(this._isCenterDefined(this.props.center)){var o=P(this.props.center),i=this._isCenterDefined(e.center)?P(e.center):null;(!i||Math.abs(o.lat-i.lat)+Math.abs(o.lng-i.lng)>1e-5)&&Math.abs(o.lat-n.lat)+Math.abs(o.lng-n.lng)>1e-5&&this.map_.panTo({lat:o.lat,lng:o.lng})}if(C(this.props.zoom)||Math.abs(this.props.zoom-e.zoom)>0&&this.map_.setZoom(this.props.zoom),!C(e.draggable)&&C(this.props.draggable)?this.map_.setOptions({draggable:this.defaultDraggableOption_}):p(e.draggable,this.props.draggable)||this.map_.setOptions({draggable:this.props.draggable}),!C(this.props.options)&&!p(e.options,this.props.options)){var r=se(this.maps_,w),s="function"==typeof this.props.options?this.props.options(r):this.props.options;if("minZoom"in(s=l(s,["zoom","center","draggable"]))){var a=this._computeMinZoom(s.minZoom);s.minZoom=we(s.minZoom,a)}this.map_.setOptions(s)}p(this.props.layerTypes,e.layerTypes)||(Object.keys(this.layers_).forEach(function(e){t.layers_[e].setMap(null),delete t.layers_[e]}),this._setLayers(this.props.layerTypes)),this.heatmap&&!p(this.props.heatmap.positions,e.heatmap.positions)&&this.heatmap.setData(this.props.heatmap.positions.map(function(e){return{location:new t.maps_.LatLng(e.lat,e.lng),weight:e.weight}})),this.heatmap&&!p(this.props.heatmap.options,e.heatmap.options)&&Object.keys(this.props.heatmap.options).forEach(function(e){t.heatmap.set(e,t.props.heatmap.options[e])})}this.markersDispatcher_.emit("kON_CHANGE"),p(this.props.hoverDistance,e.hoverDistance)||this.markersDispatcher_.emit("kON_MOUSE_POSITION_CHANGE")},t.componentWillUnmount=function(){this.mounted_=!1;var e,t,n=_.a.findDOMNode(this.googleMapDom_);n&&n.removeEventListener("mousedown",this._onMapMouseDownNative,!0),window.removeEventListener("resize",this._onWindowResize),window.removeEventListener("keydown",this._onKeyDownCapture),window.removeEventListener("mouseup",this._onChildMouseUp,!1),this.props.resetBoundsOnResize&&(t=this._mapDomResizeCallback,e=(e=n).parentNode,k?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",fe),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))),this.overlay_&&this.overlay_.setMap(null),this.maps_&&this.map_&&this.props.shouldUnregisterMapOnUnmount&&(this.map_.setOptions({scrollwheel:!1}),this.maps_.event.clearInstanceListeners(this.map_)),this.props.shouldUnregisterMapOnUnmount&&(this.map_=null,this.maps_=null),this.markersDispatcher_.dispose(),this.resetSizeOnIdle_=!1,this.props.shouldUnregisterMapOnUnmount&&(delete this.map_,delete this.markersDispatcher_)},t.render=function(){var e=this.state.overlay,t=e?null:u.a.createElement(Q,{experimental:this.props.experimental,onChildClick:this._onChildClick,onChildMouseDown:this._onChildMouseDown,onChildMouseEnter:this._onChildMouseEnter,onChildMouseLeave:this._onChildMouseLeave,geoService:this.geoService_,insideMapPanes:!1,distanceToMouse:this.props.distanceToMouse,getHoverDistance:this._getHoverDistance,dispatcher:this.markersDispatcher_});return u.a.createElement("div",{style:this.props.style,onMouseMove:this._onMapMouseMove,onMouseDownCapture:this._onMapMouseDownCapture,onClick:this._onMapClick},u.a.createElement(G,{registerChild:this._registerChild}),E&&e&&Ce(this._renderPortal(),e),t)},e}(t["Component"]);function I(e){var t=e.lng,n=Math.sin(e.lat*Math.PI/180),o=t/360+.5,i=.5-.25*Math.log((1+n)/(1-n))/Math.PI;return{x:o,y:i=i<0?0:i>1?1:i}}function be(e){var t=e.x,n=Math.PI-2*Math.PI*e.y;return{lat:180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n))),lng:360*t-180}}function Le(e,t,n,o){var i=I(e),r=I(t),s=i.x<r.x?r.x-i.x:1-i.x+r.x,a=r.y-i.y;if(s<=0&&a<=0)return null;var l=M(n/256/Math.abs(s)),h=M(o/256/Math.abs(a)),u=Math.floor(1e-9+Math.min(l,h)),p={x:i.x<r.x?.5*(i.x+r.x):i.x+r.x-1>0?.5*(i.x+r.x-1):.5*(1+i.x+r.x),y:.5*(i.y+r.y)},c=Math.pow(2,u),d=n/c/256/2,f=o/c/256/2,g=be({x:p.x-d,y:p.y-f}),m=be({x:p.x+d,y:p.y+f});return{center:be(p),zoom:u,newBounds:{nw:g,se:m}}}function xe(e){var t=e.ne,n=e.sw;return{nw:{lat:t.lat,lng:n.lng},se:{lat:n.lat,lng:t.lng}}}function ke(e){var t=e.nw,n=e.se;return{ne:{lat:t.lat,lng:n.lng},sw:{lat:n.lat,lng:t.lng}}}function Se(e,t){var n,o=e.nw,i=e.se,r=e.ne,s=e.sw,a=t.width,l=t.height;if(o&&i)n=Le(o,i,a,l);else{var h=xe({ne:r,sw:s});n=Le(h.nw,h.se,a,l)}return v({},n,{newBounds:v({},n.newBounds,ke(n.newBounds))})}function De(e,t,n){var o=function(e,t){var n=function(e,t){var n,o=t.lat,i=t.lng,r=(n=o*Math.PI/180,{metersPerLatDegree:111132.92-559.82*Math.cos(2*n)+1.175*Math.cos(4*n)-.0023*Math.cos(6*n),metersPerLngDegree:111412.84*Math.cos(n)-93.5*Math.cos(3*n)+.118*Math.cos(5*n)}),s=.5*e/r.metersPerLatDegree,a=.5*e/r.metersPerLngDegree;return{nw:{lat:o-s,lng:i-a},se:{lat:o+s,lng:i+a}}}(e,{lat:t.lat,lng:t.lng}),o=n.se,i=I(n.nw),r=I(o);return{w:Math.abs(r.x-i.x),h:Math.abs(r.y-i.y)}}(e,{lat:t.lat,lng:t.lng}),i=o.w,r=o.h,s=Math.pow(2,n);return{w:i*s*256,h:r*s*256}}function Oe(e,t){var n=e.x,o=Math.PI-2*Math.PI*e.y/Math.pow(2,t);return{lat:180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o))),lng:n/Math.pow(2,t)*360-180}}function ze(e,t){var n=I({lat:e.lat,lng:e.lng}),o=Math.pow(2,t);return{x:Math.floor(n.x*o),y:Math.floor(n.y*o)}}function Te(e,t){for(var n=e.from,o=e.to,i=Math.pow(2,t),r=[],s=n.x;s!==(o.x+1)%i;s=(s+1)%i)for(var a=n.y;a!==(o.y+1)%i;a=(a+1)%i)r.push([t,s,a]);return r}A.propTypes={apiKey:n.a.string,bootstrapURLKeys:n.a.any,defaultCenter:n.a.oneOfType([n.a.array,n.a.shape({lat:n.a.number,lng:n.a.number})]),center:n.a.oneOfType([n.a.array,n.a.shape({lat:n.a.number,lng:n.a.number})]),defaultZoom:n.a.number,zoom:n.a.number,onBoundsChange:n.a.func,onChange:n.a.func,onClick:n.a.func,onChildClick:n.a.func,onChildMouseDown:n.a.func,onChildMouseUp:n.a.func,onChildMouseMove:n.a.func,onChildMouseEnter:n.a.func,onChildMouseLeave:n.a.func,onZoomAnimationStart:n.a.func,onZoomAnimationEnd:n.a.func,onDrag:n.a.func,onDragEnd:n.a.func,onMapTypeIdChange:n.a.func,onTilesLoaded:n.a.func,options:n.a.any,distanceToMouse:n.a.func,hoverDistance:n.a.number,debounced:n.a.bool,margin:n.a.array,googleMapLoader:n.a.any,onGoogleApiLoaded:n.a.func,yesIWantToUseGoogleMapApiInternals:n.a.bool,draggable:n.a.bool,style:n.a.any,resetBoundsOnResize:n.a.bool,layerTypes:n.a.arrayOf(n.a.string),shouldUnregisterMapOnUnmount:n.a.bool},A.defaultProps={distanceToMouse:function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},hoverDistance:30,debounced:!0,options:function(){return{overviewMapControl:!1,streetViewControl:!1,rotateControl:!0,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],minZoom:3}},googleMapLoader:te,yesIWantToUseGoogleMapApiInternals:!1,style:{width:"100%",height:"100%",margin:0,padding:0,position:"relative"},layerTypes:[],heatmap:{},heatmapLibrary:!1,shouldUnregisterMapOnUnmount:!0},A.googleMapLoader=te;var Ee=j["a"]=A}}]);